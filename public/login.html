<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Login</title>
	<link rel="stylesheet" href="/styles.css" />
<script src="/js/util.js"></script>
</head>
<body>
	<header>
		<h1>Login</h1>
	</header>
	<main>
		<section class="card" style="max-width:420px;">
			<form id="login-form">
				<input placeholder="Username" id="username" required />
				<input placeholder="Password" id="password" type="password" required />
				<button type="submit" id="loginBtn">Login</button>
			</form>
			<p class="muted">Default admin: admin / admin123</p>
		</section>
	</main>
	<script>
		const form = document.getElementById('login-form');
		form.addEventListener('submit', async (e) => {
			e.preventDefault();
			document.getElementById('loginBtn').disabled = true;
			try {
				const res = await apiFetch('/api/auth/login', {
					method: 'POST',
					body: JSON.stringify({ username: username.value, password: password.value })
				});
				window.showToast('Logged in');
				location.href = '/index.html';
			} catch (err) {
				window.showToast(err.message || 'Login failed');
			} finally {
				document.getElementById('loginBtn').disabled = false;
			}
		});
	</script>
</body>
</html>

